!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function t(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=window.wp.element,l={foreground:"#00588d",src:(0,o.createElement)("svg",{enableBackground:"new 0 0 40 40",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)("g",{fill:"#00588d"},(0,o.createElement)("path",{d:"m34.88.16h-29.76c-1.66 0-3 1.34-3 3v2.34 5.33 26c0 1.66 1.34 3 3 3h29.77c1.66 0 3-1.34 3-3v-26-5.33-2.34c-.01-1.65-1.35-3-3.01-3zm.13 6.84c0 .55-.45 1-1 1h-5.71c-.55 0-1-.45-1-1s.45-1 1-1h5.71c.55 0 1 .45 1 1zm-1.71 29.84h-26.6c-1.11 0-2-.87-2-1.95v-21.09c.14.02.28.04.42.04h29.77c.15 0 .28-.02.42-.04v21.09c0 1.08-.9 1.95-2.01 1.95z"}),(0,o.createElement)("path",{d:"m31.07 20.53h-22.14c-.78 0-1.42-.64-1.42-1.42s.64-1.42 1.42-1.42h22.15c.78 0 1.42.64 1.42 1.42s-.64 1.42-1.43 1.42z"}),(0,o.createElement)("path",{d:"m20.32 26.53h-11.39c-.78 0-1.42-.64-1.42-1.42s.64-1.42 1.42-1.42h11.39c.78 0 1.42.64 1.42 1.42s-.64 1.42-1.42 1.42z"}),(0,o.createElement)("path",{d:"m27.49 32.53h-18.56c-.78 0-1.42-.64-1.42-1.42s.64-1.42 1.42-1.42h18.56c.78 0 1.42.64 1.42 1.42s-.64 1.42-1.42 1.42z"})))},r=JSON.parse('{"u2":"cumulus-gutenberg/collapsable-group"}');function a(n){return function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=JSON.parse('{"_#":"Wordpress features support","apiVersion":2,"keywords":["cumulus","cmls","group","stick","sticky","mobile"],"icon":"star-filled","category":"cmls","parent":["cumulus-gutenberg/collapsable-group"],"attributes":{},"supports":{"_#":"Allow customizing border","align":true,"alignWide":false,"className":true,"color":{"background":true,"__experimentalDuotone":false,"gradients":true,"link":true,"text":true},"customClassName":false,"defaultStylePicker":true,"html":false,"inserter":false,"multiple":true,"reusable":false,"lock":true,"spacing":{"margin":false,"padding":false,"blockGap":false},"typography":{"align":true,"fontSize":true,"lineHeight":true,"fontWeight":true,"fontStyle":true,"textTransform":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true},"border":false,"__experimentalBorder":false}}'),i=window.wp.blocks,u=window.wp.blockEditor,s=window.wp.data;function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b.apply(this,arguments)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}(0,i.registerBlockType)("cumulus-gutenberg/collapsable-group-header",p(p({},c),{},{icon:{foreground:"#00588d",src:"heading"},name:"cumulus-gutenberg/collapsable-group-header",title:"Collapsable Group Header",description:"Header for a collapsable group.",keywords:[].concat(a(c.keywords),["header"]),attributes:{bodyId:{type:"string",source:"attribute",selector:"header",attribute:"aria-controls"},mobileExpandIcon:{type:"string"}},usesContext:["cmls-collapse-group/bodyId","cmls-collapse-group/mobileExpandIcon"],edit:function(e){var t=e.attributes,n=e.setAttributes,l=e.context,r=e.clientId;(0,o.useEffect)((function(){var e={};t.bodyId!==l["cmls-collapse-group/bodyId"]&&(e.bodyId=l["cmls-collapse-group/bodyId"]),t.mobileExpandIcon!==l["cmls-collapse-group/mobileExpandIcon"]&&(e.mobileExpandIcon=l["cmls-collapse-group/mobileExpandIcon"]),Object.values(e).length&&n(e)}),[l["cmls-collapse-group/bodyId"],l["cmls-collapse-group/mobileExpandIcon"]]);var a=(0,s.useSelect)((function(e){var t=e("core/block-editor").getBlockParentsByBlockName(r,"cumulus-gutenberg/collapsable-group");if(t){var n=e("core/block-editor").getBlocksByClientId(t[t.length-1]);if(n&&n.length){var o=n[0].innerBlocks.filter((function(e){return"cumulus-gutenberg/collapsable-group-body"===(null==e?void 0:e.name)}));if(o&&o.length)return o[o.length-1].clientId}}return null}),[]),c=(0,u.useBlockProps)({"aria-controls":"block-".concat(a)});return(0,o.createElement)("header",c,(0,o.createElement)("div",{className:"wp-block-cumulus-gutenberg-collapsable-group-header-content"},(0,o.createElement)(u.InnerBlocks,{template:[["core/post-title",{fontSize:"normal",style:{typography:{fontStyle:"normal",fontWeight:"400"}},isLink:!1}]],templateLock:!1})),(0,o.createElement)("div",{className:"wp-block-cumulus-gutenberg-collapsable-group-header-icon","data-icon":t.mobileExpandIcon},(0,o.createElement)("span",null)))},save:function(e){var t=e.attributes,n=u.useBlockProps.save({"aria-controls":t.bodyId});return(0,o.createElement)("header",n,(0,o.createElement)("div",{className:"wp-block-cumulus-gutenberg-collapsable-group-header-content"},(0,o.createElement)(u.InnerBlocks.Content,null)),(0,o.createElement)("div",{className:"wp-block-cumulus-gutenberg-collapsable-group-header-icon","data-icon":t.mobileExpandIcon},(0,o.createElement)("span",null)))}})),(0,i.registerBlockType)("cumulus-gutenberg/collapsable-group-body",g(g({},c),{},{icon:{foreground:"#00588d",src:"format-aside"},name:"cumulus-gutenberg/collapsable-group-body",title:"Collapsable Group Body",description:"Body for a collapsable group.",keywords:[].concat(a(c.keywords),["body"]),attributes:{anchor:{type:"string",source:"attribute",selector:"div.wp-block-cumulus-gutenberg-collapsable-group-body",attribute:"id"}},usesContext:["cmls-collapse-group/bodyId"],edit:function(e){var t=e.context,n=e.attributes,l=e.setAttributes;(0,o.useEffect)((function(){n.anchor!==t["cmls-collapse-group/bodyId"]&&l({anchor:t["cmls-collapse-group/bodyId"]})}),[t["cmls-collapse-group/bodyId"]]);var r=(0,u.useBlockProps)();return(0,o.createElement)("div",b({},r,{"data-anchor":t["cmls-collapse-group/bodyId"]}),(0,o.createElement)(u.InnerBlocks,{template:[["core/paragraph"]],templateLock:!1,__experimentalDirectInsert:!0,__experimentalDefaultBlock:"core/paragraph"}))},save:function(e){var t=e.attributes,n=u.useBlockProps.save({id:t.anchor});return(0,o.createElement)("div",n,(0,o.createElement)(u.InnerBlocks.Content,null))}}));var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+a(Array(12)).map((function(){return Math.random().toString(32)[2]})).join("")},f=window.wp.components;function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function v(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var k=function(e){var t,o,l,r,a,c,i,u,s,d,p,b,m={"--padding-top":null==e||null===(t=e.style)||void 0===t||null===(o=t.spacing)||void 0===o||null===(l=o.padding)||void 0===l?void 0:l.top,"--padding-right":null==e||null===(r=e.style)||void 0===r||null===(a=r.spacing)||void 0===a||null===(c=a.padding)||void 0===c?void 0:c.right,"--padding-bottom":null==e||null===(i=e.style)||void 0===i||null===(u=i.spacing)||void 0===u||null===(s=u.padding)||void 0===s?void 0:s.bottom,"--padding-left":null==e||null===(d=e.style)||void 0===d||null===(p=d.spacing)||void 0===p||null===(b=p.padding)||void 0===b?void 0:b.left,"--separator-color":null==e?void 0:e.separatorColor,"--collapse-width":null==e?void 0:e.collapseWidth};return e.borderColor&&(m.borderColor=e.borderColor),e.hasStickyPosition&&Object.assign(m,{"--sticky-position":null==e?void 0:e.stickyPosition,"--sticky-zindex":null==e?void 0:e.stickyZIndex}),e.mobileExpandIconColor&&(m["--mobile-expand-icon-color"]=null==e?void 0:e.mobileExpandIconColor),Object.keys(m).filter((function(e){return null!=m[e]&&null!=m[e]})).reduce((function(e,t){return v(v({},e),{},n({},t,m[t]))}),{})},w=function(e){var t={};return null!=e&&e.hasStickyPosition&&(t["sticky-desktop-container"]=null==e?void 0:e.stickyDesktopContainer,t["sticky-mobile-container"]=null==e?void 0:e.stickyMobileContainer),Object.keys(t).filter((function(e){return null!=t[e]&&null!=t[e]})).reduce((function(e,o){return v(v({},e),{},n({},"data-".concat(o),t[o]))}),{})},E=function(e){return[null!=e&&e.collapseOnMobile?"has-collapse-on-mobile":null,null!=e&&e.alwaysShowHeader?"has-always-show-header":null,null!=e&&e.hasStickyPosition?"has-sticky-position":null,null!=e&&e.hasOnlyStickOnMobile?"has-only-stick-on-mobile":null].filter((function(e){return null!==e}))},O={section:"The <section> element should represent a standalone portion of the document that can't be better represented by another element.",aside:"The <aside> element should represent a portion of a document whose content is only indirectly related to the document's main content."};(0,i.registerBlockType)(r.u2,{icon:l,providesContext:{"cmls-collapse-group/bodyId":"bodyId","cmls-collapse-group/mobileExpandIcon":"mobileExpandIcon"},edit:function(e){var l,r,a=e.attributes,c=e.setAttributes,i=a.tagName,s=void 0===i?"div":i,d=(l=(0,o.useState)(k(a)),r=2,function(e){if(Array.isArray(e))return e}(l)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,l,r=[],_n=!0,a=!1;try{for(n=n.call(e);!(_n=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){a=!0,l=e}finally{try{_n||null==n.return||n.return()}finally{if(a)throw l}}return r}}(l,r)||t(l,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=d[0],b=d[1],m="web"===o.Platform.OS;(0,o.useEffect)((function(){window._wpLoadBlockEditor.then((function(){!function(e){var t,o,l=Object.assign({prefix:"",attributes:{},setAttributes:function(){},attribute:"bodyId"},e);if(null===(t=l.attributes)||void 0===t||!t.bodyId||l.attributes.bodyId&&(null===(o=window.document.querySelectorAll('[data-anchor="'.concat(l.attributes.bodyId,'"],#').concat(l.attributes.bodyId)))||void 0===o?void 0:o.length)>1){for(var r=y(l.prefix);window.document.querySelector('[data-anchor="'.concat(r,"],#").concat(r));)r=y(l.prefix);l.setAttributes(n({},l.attribute,r))}l.attributes.bodyId}({prefix:"cgcg-",attributes:a,setAttributes:c,attribute:"bodyId"})}))}),[]),(0,o.useEffect)((function(){b(k(a))}),[a]),(0,o.useEffect)((function(){c({className:E(a)})}),[null==a?void 0:a.collapseOnMobile,null==a?void 0:a.alwaysShowHeader,null==a?void 0:a.hasStickyPosition]);var g=(0,u.useBlockProps)(v(v({className:E(a)},w(a)),{},{style:p}));return(0,o.createElement)(s,g,(0,o.createElement)(u.InspectorControls,null,(0,o.createElement)(f.Panel,null,(0,o.createElement)(f.PanelBody,{title:"Collapse"},(0,o.createElement)(f.PanelRow,null,(0,o.createElement)(f.ToggleControl,{label:"Collapse on Mobile",checked:a.collapseOnMobile,onChange:function(e){return c({collapseOnMobile:e})}})),(0,o.createElement)(f.PanelRow,null,(0,o.createElement)(f.ToggleControl,{label:"Show Header on Desktop",checked:a.alwaysShowHeader,onChange:function(e){return c({alwaysShowHeader:e})}})),(a.collapseOnMobile||a.alwaysShowHeader)&&(0,o.createElement)(u.ColorPaletteControl,{label:"Header Separator Color",value:a.separatorColor,onChange:function(e){return c({separatorColor:e})}}),a.collapseOnMobile&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(f.SelectControl,{label:"Mobile Expand Icon",value:a.mobileExpandIcon,options:[{value:"plus",label:"Plus/Minus"},{value:"arrows",label:"Arrows"}],onChange:function(e){return c({mobileExpandIcon:e})}}),(0,o.createElement)(u.ColorPaletteControl,{label:"Mobile Expand Icon Color",value:a.mobileExpandIconColor,onChange:function(e){return c({mobileExpandIconColor:e})}}))),(0,o.createElement)(f.PanelBody,{title:"Sticky Position"},(0,o.createElement)(f.PanelRow,null,(0,o.createElement)(f.ToggleControl,{label:"Stick Scroll Position",help:"Element will 'stick' within its boundary on desktop and mobile.",checked:a.hasStickyPosition,onChange:function(e){return c({hasStickyPosition:e})}})),a.hasStickyPosition&&(0,o.createElement)(o.Fragment,null,!a.backgroundColor&&(0,o.createElement)("p",null,(0,o.createElement)("strong",null,"Note: "),"Set a background color on this block when using sticky position so content underneath it does not show through!"),(0,o.createElement)(f.PanelRow,null,(0,o.createElement)(f.ToggleControl,{label:"Only Stick on Mobile",checked:a.hasOnlyStickOnMobile,onChange:function(e){return c({hasOnlyStickOnMobile:e})}})),(0,o.createElement)(f.PanelRow,null,(0,o.createElement)(f.TextControl,{label:"Sticky Position",help:(0,o.createElement)(o.Fragment,null,"Accepts any valid CSS"," ",(0,o.createElement)("em",null,"value"),". Relative to the boundary container's top. Default setting accounts for masthead height in the Cumulus Wordpress theme."),value:a.stickyPosition,onChange:function(e){return c({stickyPosition:e})}})),(0,o.createElement)(f.PanelRow,null,(0,o.createElement)(f.TextControl,{label:"Sticky Z-Index",help:"Z-Index to apply when stuck.",value:a.stickyZIndex,onChange:function(e){return c({stickyZIndex:e})}})),(0,o.createElement)("h3",null,"Boundary Containers"),(0,o.createElement)("p",null,"The block's stickiness will be contained to the specified containers. The boundary must be a container of this block. If no selector is defined, the document body will be used."),(0,o.createElement)("p",null,"Containers between the boundary and this block which have position may break the boundary!",m&&(0,o.createElement)(f.ExternalLink,{href:"https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Positioning#positioning_contexts",style:{display:"block",marginTop:"8px"}},"Learn more about position context")),(0,o.createElement)(f.TextControl,{label:"Desktop Container",help:(0,o.createElement)(o.Fragment,null,"Accepts any valid CSS"," ",(0,o.createElement)("em",null,"selector"),"."),value:a.stickyDesktopContainer,onChange:function(e){return c({stickyDesktopContainer:e})}}),(0,o.createElement)(f.TextControl,{label:"Mobile Container",help:(0,o.createElement)(o.Fragment,null,"Accepts any valid CSS"," ",(0,o.createElement)("em",null,"selector"),"."),value:a.stickyMobileContainer,onChange:function(e){return c({stickyMobileContainer:e})}}))))),(0,o.createElement)(u.InspectorAdvancedControls,null,(0,o.createElement)(f.SelectControl,{label:"HTML element",options:[{label:"Default (<div>)",value:"div"},{label:"<section>",value:"section"},{label:"<aside>",value:"aside"}],value:s,onChange:function(e){return c({tagName:e})},help:O[s]})),(0,o.createElement)(u.InnerBlocks,{template:[["cumulus-gutenberg/collapsable-group-header"],["cumulus-gutenberg/collapsable-group-body",{anchor:a.bodyId}]],templateLock:!1}))},save:function(e){var t=e.attributes,n=t.tagName,l=void 0===n?"div":n,r=u.useBlockProps.save(v(v({className:E(t)},w(t)),{},{style:k(t)}));return(0,o.createElement)(l,r,(0,o.createElement)(u.InnerBlocks.Content,null))}})}();