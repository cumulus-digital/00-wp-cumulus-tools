!function(){"use strict";var t={n:function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,{a:s}),s},d:function(e,s){for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e=window.lodash,s=!1;try{var i=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}catch(t){}var o=()=>s,l=window.jQuery;const a=t.n(l)();addEventListener("DOMContentLoaded",(()=>{if(document.body.classList.contains("block-editor-page"))return;const t=matchMedia("(min-width: 768px)");let s=!1;const i=t=>{s=!t.matches};t.addEventListener("change",i),i(t);const l=(t,e,s,i=3)=>{switch(e){case">":case">=":return((t,e)=>t-i>=e||t+i>=e)(t,s);case"<":case"<=":return((t,e)=>t-i<=e||t+i<=e)(t,s)}},n=[],c=()=>{let t=Date.now().toString(36)+Math.random().toString(36).substring(2);return n.includes(t)?c():(n.push(t),t)},h={group:".wp-block-cumulus-gutenberg-collapsable-group",header:".wp-block-cumulus-gutenberg-collapsable-group-header",body:".wp-block-cumulus-gutenberg-collapsable-group-body",placeholder:".wp-block-cumulus-gutenberg-collapsable-group-placeholder"};class r{uid=null;el=null;$el=null;header=null;body=null;classes={stuck:"is-stuck",bodyStuck:"wp-b-cgcg-stuck",bottomed:"is-bottom",overflow:"is-overflow",expanded:"is-expanded"};originalClassNames=null;stateListeners=[];enabled=!1;constructor(t){if(!t.el)throw"Must supply an el to StickGroup!";Object.keys(t).forEach((e=>{this[e]=t[e]})),this.$el=a(this.el),this.uid=c(),this.CollapseGroup=this}registerListener(t){this.stateListeners.push(t)}fireStateListeners(t){this.stateListeners.forEach((e=>e(t)))}setState(t,e){this["state"+t[0].toUpperCase()+t.slice(1)]=e,this.fireStateListeners({group:this.el,state:t,val:e})}}class d extends r{isCollapsable=!1;stateExpanded=!1;constructor(t){super(t),this.isCollapsable=this.el.classList.contains("has-collapse-on-mobile"),this.setAria()}setAria(){let t=!1;return s||(t="hidden"!==getComputedStyle(this.body).display),this.header.setAttribute("aria-expanded",t),this.body.setAttribute("aria-hidden",!t),this.setState("expanded",t),t}isExpanded(){return!!this.isCollapsable&&"none"!==getComputedStyle(this.el).getPropertyValue("display")}setExpanded(t=!this.stateExpanded){if(!s)return!1;let e=t?"add":"remove";this.el.classList[e](this.classes.expanded),this.setState("expanded",t),this.header.setAttribute("aria-expanded",t),this.body.setAttribute("aria-hidden",!t)}}class u extends d{placeholder=null;stickyPosition=null;cache={cmlsScrollMargin:null,offset:null,position:null,height:null,width:null,margin:{top:null,right:null,bottom:null,left:null},padding:{top:null,right:null,bottom:null,left:null},container:{desktop:{attribute:"data-sticky-desktop-container",el:null,$el:null,height:null,offset:null},mobile:{attribute:"data-sticky-mobile-container",el:null,$el:null,height:null,offset:null}}};isStickable=!1;onlyStickOnMobile=!1;stateStuck=!1;stateBottomed=!1;stateOverflow=!1;constructor(t){if(super(t),this.isStickable=this.el.classList.contains("has-sticky-position"),this.onlyStickOnMobile=this.el.classList.contains("has-only-stick-on-mobile"),this.isStickable){this.generatePlaceholder();for(const t in this.cache.container)this.cache.container[t].el=this.el.closest(this.el.getAttribute(this.cache.container[t].attribute)),this.cache.container[t].el?this.cache.container[t].$el=a(this.cache.container[t].el):(this.cache.container[t].el=document.body,this.cache.container[t].$el=a(document.body));this.update(),window?.ResizeObserver&&(this.resizeObserver=new ResizeObserver((0,e.debounce)(this.onResize,30)),this.resizeObserver.observe(this.el))}}update(){if(!this.isStickable)return;this.enabled=!1,this.unstyle();const t=this.el.style.marginBottom;let e=getComputedStyle(this.el).getPropertyValue("--sticky-position");this.el.style.setProperty("margin-bottom",e),e=parseFloat(getComputedStyle(this.el).marginBottom),this.el.style.marginBottom=t;const i=s?"mobile":"desktop";"static"===getComputedStyle(this.cache.container[i].el).position&&this.cache.container[i].el.style.setProperty("position","relative"),Object.assign(this,{stickyPosition:e,cache:{offset:this.$el.offset(),position:this.$el.position(),height:this.$el.outerHeight(),width:this.$el.outerWidth(),style:this.el.getAttribute("style"),margin:{top:parseInt(this.$el.css("marginTop"),10)||0,right:parseInt(this.$el.css("marginRight"),10)||0,bottom:parseInt(this.$el.css("marginBottom"),10)||0,left:parseInt(this.$el.css("marginLeft"),10)||0},padding:{top:parseInt(this.$el.css("paddingTop"),10)||0,right:parseInt(this.$el.css("paddingRight"),10)||0,bottom:parseInt(this.$el.css("paddingBottom"),10)||0,left:parseInt(this.$el.css("paddingLeft"),10)||0},container:{...this.cache.container,desktop:{...this.cache.container.desktop,height:this.cache.container.desktop.$el.height(),offset:this.cache.container.desktop.$el.offset()},mobile:{...this.cache.container.mobile,height:this.cache.container.mobile.$el.height(),offset:this.cache.container.mobile.$el.offset()}}}}),this.cache.offset.left-=this.cache.margin.left,this.cache.offset.top-=this.cache.margin.top,this.restyle(),Object.assign(this,{stateStuck:null===this.stateStuck?this.el.classList.contains(this.classes.stuck):this.stateStuck,stateOverflow:null===this.stateOverflow?this.el.classList.contains(this.classes.overflow):this.stateOverflow,stateBottomed:null===this.stateBottomed?this.el.classList.contains(this.classes.bottomed):this.stateBottomed}),this.setupScrollEvent(),this.enabled=!0}generatePlaceholder(){if(this.isStickable)return this.placeholder=document.createElement("div"),this.placeholder.classList.add(h.placeholder.substring(1)),Object.assign(this.placeholder.style,{display:"none",height:"var(--placeholder-height)"}),this.placeholder.style.setProperty("--placeholder-height",this.cache.height),this.$el.after(this.placeholder),this.placeholder}unstyle(){this.cache.originalClassNames=this.el.className,this.el.classList.remove(...Object.values(this.classes)),this.header.setAttribute("aria-expanded",!0),this.body.setAttribute("aria-hidden",!1),this.el.style.removeProperty("width")}restyle(){this.stateStuck?(this.setStuck(!0),this.setBottomed(this.stateBottomed)):this.setStuck(!1),this.header.setAttribute("aria-expanded",!!this.stateExpanded),this.body.setAttribute("aria-hidden",!this.stateExpanded)}onResize(t){for(let e of t){if(!e.target.CollapseGroup||!e.borderBoxSize)continue;const t=Array.isArray(e.borderBoxSize)?e.borderBoxSize[0]:e.borderBoxSize;e.target.CollapseGroup?.placeholder?.style?.setProperty("--placeholder-height",t.blockSize+"px")}}scrollHandler(){const t=a(window).scrollTop(),e=s?"mobile":"desktop";l(t,">=",this.cache.offset.top-this.stickyPosition)&&l(t,"<=",this.cache.container[e].offset.top+this.cache.container[e].height-this.stickyPosition-this.cache.height,1)&&(!this.stateStuck||this.stateBottomed)?(this.stateBottomed&&this.setBottomed(!1),this.setStuck(!0)):l(t,"<",this.cache.offset.top-this.stickyPosition,1)&&this.stateStuck?this.setStuck(!1):!l(t,">=",this.cache.container[e].offset.top+this.cache.container[e].height-this.stickyPosition+this.body.scrollTop-this.cache.height,1)||this.stateBottomed||s&&this.stateExpanded||(this.stateStuck||this.setStuck(!0),this.setBottomed(!0))}setupScrollEvent(){const t=`scroll.${this.uid}`;if(this.onlyStickOnMobile&&!s)return this.setStuck(!1),this.setBottomed(!1),void a(window).off(t);a(window).off(t).on(t,(0,e.debounce)((()=>{this.scrollHandler()}),10)),this.scrollHandler()}setStuck(t=null){null===t&&(t=!this.stateStuck);let e=t?"add":"remove";this.el.classList[e](this.classes.stuck),window.document.body.classList[e](this.classes.bodyStuck),this.placeholder.style.setProperty("display",t?"block":"none"),this.stateStuck=t,t?(this.cache.style=JSON.parse(JSON.stringify(this.el.style)),Object.assign(this.el.style,{left:this.cache.offset.left+"px",top:this.stickyPosition+"px",width:this.cache.width+"px"}),window.cmlsExtraScrollMargin&&window.cmlsExtraScrollMargin.add(this.uid,this.cache.height+"px")):(Object.assign(this.el.style,{left:this.cache.style.left,top:this.cache.style.top,width:this.cache.style.width}),window.cmlsExtraScrollMargin&&window.cmlsExtraScrollMargin.remove(this.uid))}setBottomed(t=null){const e=s?"mobile":"desktop";null===t&&(t=!this.stateBottomed);let i=t?"add":"remove";this.el.classList[i](this.classes.bottomed),this.stateBottomed=t,t&&Object.assign(this.el.style,{left:this.cache.position.left,top:this.cache.container[e].height-this.cache.height+"px",width:this.cache.width})}}const p=(0,e.debounce)((()=>{const t=document.querySelectorAll(h.group);t&&t.length&&[].forEach.call(t,(t=>{if(t.CollapseGroup)t.CollapseGroup instanceof u&&t.CollapseGroup.update();else{const e=t.querySelector(h.header),s=t.querySelector(h.body);let i=r;t.classList.contains("has-collapse-on-mobile")&&(i=d),t.classList.contains("has-sticky-position")&&(i=u),t.CollapseGroup=new i({el:t,header:e,body:s})}t.CollapseGroup instanceof d&&t.CollapseGroup.setAria(),t.CollapseGroup.enabled=!0}))}),100);addEventListener("load",(()=>{p()})),addEventListener("resize",(0,e.debounce)(p,200,{leading:!1,trailing:!0})),addEventListener("click",(t=>{if(s&&t.target.matches(h.header+" a")){const e=t.target.closest(h.group);e&&e.CollapseGroup instanceof d&&t.preventDefault()}})),addEventListener("click",(t=>{if(!s)return;const e=t.target.closest(h.header);if(e){const t=e.parentNode;t.CollapseGroup instanceof d&&t.CollapseGroup.setExpanded()}}),o?{passive:!0}:null)}))}();